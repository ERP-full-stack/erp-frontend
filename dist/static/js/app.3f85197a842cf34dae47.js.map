{"version":3,"sources":["webpack:///./src/App.vue?2c59","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/router/index.js","webpack:///./src/router/oauthRouter.js","webpack:///./src/router/error.js","webpack:///./src/data/loginUserInfo.js","webpack:///./src/store/module/login.js","webpack:///./src/store/index.js","webpack:///./src/common/element-ui.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","name","ssrContext","vue_esm","use","vue_router_esm","router","linkActiveClass","linkExactActiveClass","routes","path","component","r","e","then","bind","catch","oe","oauthRouter","redirect","children","label","icon","meta","role","error","data_loginUserInfo","username","password","describe","module_login","state","window","sessionStorage","getItem","newRouter","mutations","SET_USERNAME","SET_ROLE","SET_DESCRIBE","SET_NEWROUTER","actions","login","_ref","info","commit","promise_default","a","resolve","reject","status","forEach","value","setItem","roles","_ref2","logout","_ref3","removeItem","vuex_esm","src_store","Store","modules","lib_input_default","lib_form_default","lib_form_item_default","lib_button_default","lib_menu_default","lib_submenu_default","lib_menu_item_default","lib_menu_item_group_default","prototype","$message","lib_message_default","config","productionTip","beforeEach","to","from","next","length","newrouter","newchildren","filter","route","indexOf","console","log","addRoutes","concat","dispatch","extends_default","el","store","components","App","template"],"mappings":"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","file":"static/js/app.3f85197a842cf34dae47.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-57d511ce\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-57d511ce\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-57d511ce\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App',\n};\n</script>\n\n<style>\nhtml, body{\n  overflow: hidden;\n}\nhtml,body,#app {\n  width: 100%;\n  height: 100%;\n  background: #f1f1f1;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","import Vue from 'vue';\nimport Router from 'vue-router';\n\nconst Login = r => require.ensure([], () => r(require('@/views/login/index.vue')), 'login');\n// const Layout = r => require.ensure([], () => r(require('@/views/layout/index.vue')), 'layout');\n// const Overview = r => require.ensure([], () => r(require('@/views/overview/index.vue')), 'overview');\n// const Flow = r => require.ensure([], () => r(require('@/views/flow/index.vue')), 'flow');\n// const Sale = r => require.ensure([], () => r(require('@/views/sale/index.vue')), 'sale');\n\nVue.use(Router);\n\nexport default new Router({\n  linkActiveClass: 'selColor',\n  linkExactActiveClass: 'selColor',\n  routes: [\n    {\n      path: '/login',\n      name: 'Login',\n      component: Login,\n    },\n  ],\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","const Layout = r => require.ensure([], () => r(require('@/views/layout/index.vue')), 'layout');\nconst Overview = r => require.ensure([], () => r(require('@/views/overview/index.vue')), 'overview');\nconst Flow = r => require.ensure([], () => r(require('@/views/flow/index.vue')), 'flow');\nconst Sale = r => require.ensure([], () => r(require('@/views/sale/index.vue')), 'sale');\n\nexport default [\n  {\n    path: '/',\n    component: Layout,\n    redirect: '/overview',\n    children: [\n      {\n        path: '/overview',\n        name: 'overview',\n        label: '概览',\n        icon: 'el-icon-menu',\n        component: Overview,\n        meta: {\n          role: ['admin', 'overview', 'flow', 'sale'],\n        },\n      },\n      {\n        path: '/flow',\n        name: 'flow',\n        label: '流量',\n        icon: 'el-icon-document',\n        component: Flow,\n        meta: {\n          role: ['admin', 'flow'],\n        },\n      },\n      {\n        path: '/sale',\n        name: 'sale',\n        label: '销售',\n        icon: 'el-icon-setting',\n        component: Sale,\n        meta: {\n          role: ['admin', 'sale'],\n        },\n      },\n    ],\n  },\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/oauthRouter.js","const Error404 = r => require.ensure([], () => r(require('@/views/error/404/index.vue')), 'Error404');\nconst Error403 = r => require.ensure([], () => r(require('@/views/error/403/index.vue')), 'Error403');\nconst Error500 = r => require.ensure([], () => r(require('@/views/error/500/index.vue')), 'Error500');\n\nexport default [\n  {\n    path: '/error403',\n    name: 'error403',\n    component: Error403,\n  },\n  {\n    path: '/error404',\n    name: 'error404',\n    component: Error404,\n  },\n  {\n    path: '/error500',\n    name: 'error500',\n    component: Error500,\n  },\n  {\n    path: \"*\",\n    redirect: \"/Error404\"\n  },\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/error.js","const loginUserInfo = [\n  {\n    id: 1,\n    username: 'admin',\n    password: '123456',\n    role: 'admin',\n    describe: '可以看到所有的页面[overview, flow, sale]',\n  },\n  {\n    id: 2,\n    username: 'overview',\n    password: '123456',\n    role: 'overview',\n    describe: '可以看到overview页面',\n  },\n  {\n    id: 3,\n    username: 'flow',\n    password: '123456',\n    role: 'flow',\n    describe: '可以看到overview,flow页面',\n  },\n  {\n    id: 3,\n    username: 'sale',\n    password: '123456',\n    role: 'sale',\n    describe: '可以看到overview,sale页面',\n  },\n];\n\nexport default loginUserInfo;\n\n\n\n// WEBPACK FOOTER //\n// ./src/data/loginUserInfo.js","import loginUserInfo from './../../data/loginUserInfo';\n\nconst login = {\n  state: {\n    username: window.sessionStorage.getItem('username'),\n    role: window.sessionStorage.getItem('role'),\n    describe: window.sessionStorage.getItem('describe'),\n    newRouter: [],\n  },\n  mutations: {\n    SET_USERNAME: (state, username) => {\n      state.username = username;\n    },\n    SET_ROLE: (state, role) => {\n      state.role = role;\n    },\n    SET_DESCRIBE: (state, describe) => {\n      state.describe = describe;\n    },\n    SET_NEWROUTER: (state, newRouter) => {\n      state.newRouter = newRouter;\n    },\n  },\n  actions: {\n    login({ commit }, info) {\n      return new Promise((resolve, reject) => {\n        let status = 0;\n        loginUserInfo.forEach((value) => {\n          if (value.username === info.username) {\n            window.sessionStorage.setItem('username', value.username);\n            window.sessionStorage.setItem('role', value.role);\n            window.sessionStorage.setItem('describe', value.describe);\n            commit('SET_USERNAME', value.username);\n            commit('SET_ROLE', value.role);\n            commit('SET_DESCRIBE', value.describe);\n            status += 1;\n          }\n        });\n        if (status > 0) {\n          resolve(info);\n        } else {\n          reject(info);\n        }\n      });\n    },\n    roles({ commit }, newRouter) {\n      return new Promise((resolve) => {\n        commit('SET_NEWROUTER', newRouter);\n        resolve(newRouter);\n      });\n    },\n    logout({ commit }) {\n      return new Promise((resolve) => {\n        window.sessionStorage.removeItem('username');\n        window.sessionStorage.removeItem('role');\n        window.sessionStorage.removeItem('describe');\n        commit('SET_USERNAME', '');\n        commit('SET_ROLE', '');\n        commit('SET_DESCRIBE', '');\n        commit('SET_NEWROUTER', []);\n        resolve();\n      });\n    },\n  },\n};\n\nexport default login;\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/module/login.js","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport login from './module/login';\n\nVue.use(Vuex);\n\nconst store = new Vuex.Store({\n  modules: {\n    login,\n  },\n});\n\nexport default store;\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","import Vue from 'vue';\n\nimport {\n  Input,\n  Form,\n  FormItem,\n  Button,\n  Menu,\n  Submenu,\n  MenuItem,\n  MenuItemGroup,\n  Message,\n} from 'element-ui';\n\nVue.use(Input);\nVue.use(Form);\nVue.use(FormItem);\nVue.use(Button);\nVue.use(Menu);\nVue.use(Submenu);\nVue.use(MenuItem);\nVue.use(MenuItemGroup);\n\nVue.prototype.$message = Message;\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/element-ui.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport 'normalize.css';\nimport App from './App';\nimport router  from './router';\nimport oauthRouter from './router/oauthRouter';\nimport error from './router/error';\nimport store from './store';\nimport './common/element-ui';\n\nVue.config.productionTip = false;\n\nrouter.beforeEach((to, from, next) => {\n  if(store.state.login.role){ //判断role 是否存在\n    if (store.state.login.newRouter.length !== 0) {\n      next();\n    } else {\n      let newrouter;\n      if (store.state.login.role === 'admin') {\n        newrouter = oauthRouter;\n      } else {\n        let newchildren = oauthRouter[0].children.filter(route => {\n          if (route.meta) {\n            if (route.meta.role.indexOf(store.state.login.role) > 0) {\n              return true\n            }\n            return false\n          }else{\n            return true\n          }\n        });\n        console.log(newchildren);\n        newrouter = oauthRouter;\n        newrouter[0].children = newchildren\n      }\n      router.addRoutes(newrouter.concat(error));\n      store.dispatch('roles',newrouter).then(() => {\n        next({ ...to })\n      });\n    }\n  }else{\n    if (['/login'].indexOf(to.path) !== -1) {\n      next()\n    } else {\n      next('/login')\n    }\n  }\n});\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  store,\n  components: { App },\n  template: '<App/>',\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}